!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(r=r||self).crumbs=t()}(this,function(){"use strict";var r={debug:!1,setDebug:function(r){try{this.debug=r}catch(r){this.throwError(r)}},isLsAvailable:function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(r){return!1}},throwError:function(r,t){void 0===t&&(t="error"),console[t]("[crumbsJS] An error has occurred: "+r)},set:function(r,t,e,o){var i=this;try{if(Array.isArray(r)){var n=r;return n.forEach(function(r){if(!r.hasOwnProperty("name")||!r.hasOwnProperty("value"))throw"Mass cookie set failed, on or more object properties are incorrect."}),n.map(function(r){return!!i.set(r.name,r.value,r.expires,r.domain)&&r}).filter(function(r){return r})}var a="";if(null!=e){var s=new Date,c=864e5;if("object"==typeof e){switch(e.type.toLowerCase()){case"minute":c=6e4;break;case"hour":c=36e5;break;case"day":c=864e5;break;case"week":c=6048e5;break;case"month":c=24192e5;break;default:throw"Not a valid time type format (use minute, hour, day, week or month only)"}e=e.value}s.setTime(s.getTime()+e*c),s.toUTCString(),a="expires="+s}var u=r+"="+t+";"+a+";"+(null!=o?"path="+o+";":o);return document.cookie=u,!0}catch(r){return this.throwError(r),!1}},get:function(r){try{var t=decodeURIComponent(document.cookie),e=(t=t.split("; ")).filter(function(t){return(t=t.split("="))[0]===r?1:0});return e.length>0?e[0].split("=")[1]:null}catch(r){return this.throwError(r),!1}},getAll:function(){try{var r=decodeURIComponent(document.cookie);return!!(r=r.split("; "))[0]&&r.map(function(r){return{name:(r=r.split("="))[0],value:r[1]}})}catch(r){return this.throwError(r),!1}},delete:function(r){var t=this;try{return Array.isArray(r)?(r.forEach(function(r){t.delete(r)}),!0):(document.cookie=r+"=''; expires=Thu, 01 Jan 1970 00:00:01 GMT",!0)}catch(r){this.throwError(r)}},deleteAll:function(){var r=this;try{var t=decodeURIComponent(document.cookie);return t=t.split("; ").map(function(t){t=t.split("=");return r.delete(t[0])}),!0}catch(r){this.throwError(r)}},ls:{throwError:function(t,e){void 0===e&&(e="error"),r.throwError(t,e)},ls:window.localStorage,set:function(t,e){var o=this;if(!r.isLsAvailable())return this.throwError("Local Storage is not available, action was completed using cookies","warn"),r.set(t,e);try{return Array.isArray(t)?(t.forEach(function(r){if(!r.hasOwnProperty("key")||!r.hasOwnProperty("value"))throw"Mass key-value pair set failed, on or more object properties are incorrect."}),t.map(function(r){o.set(r.key,r.value)}).filter(function(r){return r})):(this.ls.setItem(t,JSON.stringify(e)),!0)}catch(r){return this.throwError(r),!1}},get:function(t,e){var o=this;if(void 0===e&&(e=!0),!r.isLsAvailable())return this.throwError("Local Storage is not available, action was completed using cookies","warn"),r.get(t);try{return Array.isArray(t)?t.map(function(r){return{key:r,value:o.get(r)}}).filter(function(r){return r}):e?JSON.parse(this.ls.getItem(t)):this.ls.getItem(t)}catch(r){return this.throwError(r),!1}},getAll:function(t){if(void 0===t&&(t=!0),!r.isLsAvailable())return this.throwError("Local Storage is not available, action was completed using cookies"),r.getAll();try{var e=[];for(var o in this.ls)"key"!=o&&"getItem"!=o&&"setItem"!=o&&"removeItem"!=o&&"clear"!=o&&"length"!=o&&e.push({key:o,value:t?JSON.parse(this.ls[o]):this.ls[o]});return e}catch(r){return this.throwError(r),!1}},delete:function(t){if(!r.isLsAvailable())return this.throwError("Local Storage is not available, action was aborted"),!1;try{return this.ls.removeItem(t),!0}catch(r){return this.throwError(r),!1}},deleteAll:function(){if(!r.isLsAvailable())return this.throwError("Local Storage is not available, action was aborted"),!1;try{return this.ls.clear(),!0}catch(r){return this.throwError(r),!1}}}};return r});